image:
  file: .gitpod.Dockerfile

tasks:
  - name: Install Dependencies & Run Tests
    init: |
      # Install project dependencies
      dotnet restore

      # Install Chrome and ChromeDriver
      sudo apt-get update && sudo apt-get install -y wget unzip
      wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
      sudo dpkg -i google-chrome-stable_current_amd64.deb || sudo apt-get install -f -y
      wget -N https://chromedriver.storage.googleapis.com/117.0.5938.62/chromedriver_linux64.zip
      unzip chromedriver_linux64.zip
      sudo mv chromedriver /usr/bin/chromedriver
      sudo chmod +x /usr/bin/chromedriver

    command: |
      # Run the tests
      dotnet test

ports:
  - port: 6080 # Example port if you're exposing an application or test dashboard
    onOpen: ignore